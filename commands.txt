# ========================================
# COMANDOS PARA DESPLEGAR INVENTORIT EN KUBERNETES
# ========================================

# 1. CREAR CLUSTER KIND
kind create cluster --config kind-config.yaml --name inventorit

# 2. VERIFICAR CLUSTER
kubectl cluster-info --context kind-inventorit

# 3. CREAR NAMESPACE
kubectl apply -f manifests/namespace.yaml

# 4. DESPLEGAR CONFIGURACION (Secrets y ConfigMaps)
kubectl apply -f manifests/config/

# 5. DESPLEGAR BASE DE DATOS
kubectl apply -f manifests/db/

# 6. ESPERAR A QUE POSTGRES ESTE LISTO
kubectl rollout status deployment/postgres -n inventorit

# 7. DESPLEGAR BACKEND
kubectl apply -f manifests/backend/

# 8. ESPERAR A QUE BACKEND ESTE LISTO
kubectl rollout status deployment/backend -n inventorit

# 9. DESPLEGAR FRONTEND
kubectl apply -f manifests/frontend/

# 10. DESPLEGAR NGINX
kubectl apply -f manifests/nginx/

# 11. VERIFICAR TODOS LOS PODS
kubectl get pods -n inventorit

# 12. VERIFICAR SERVICIOS
kubectl get svc -n inventorit

# 13. ACCEDER A LA APLICACION
# Abrir navegador en: http://localhost:8080

# ========================================
# COMANDOS DE VERIFICACION
# ========================================

# Ver logs del backend
kubectl logs -l app=backend -n inventorit

# Ver logs de postgres
kubectl logs -l app=postgres -n inventorit

# Ver logs del frontend
kubectl logs -l app=frontend -n inventorit

# Ver logs de nginx
kubectl logs -l app=nginx -n inventorit

# Describir un pod especifico
kubectl describe pod -l app=backend -n inventorit

# ========================================
# LIMPIEZA
# ========================================

# Eliminar namespace (elimina todos los recursos)
kubectl delete namespace inventorit

# Eliminar cluster
kind delete cluster --name inventorit

